"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4768],{2152:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"guides/troubleshooting","title":"Troubleshooting","description":"If the UI shows a \\"Service Not Started\\" message.","source":"@site/docs/guides/troubleshooting.md","sourceDirName":"guides","slug":"/guides/troubleshooting","permalink":"/docs/guides/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/webprofusion/certify-docs/edit/master/docs/guides/troubleshooting.md","tags":[],"version":"current","frontMatter":{"id":"troubleshooting","title":"Troubleshooting"},"sidebar":"docSidebar","previous":{"title":"Using Certificates in Windows","permalink":"/docs/guides/ssl-windows"},"next":{"title":"Deployment Tasks","permalink":"/docs/deployment/tasks_intro"}}');var s=i(4848),n=i(8453);const r={id:"troubleshooting",title:"Troubleshooting"},a=void 0,c={},l=[{value:"If the UI shows a &quot;Service Not Started&quot; message.",id:"if-the-ui-shows-a-service-not-started-message",level:2},{value:"Issues communicating with the CA",id:"issues-communicating-with-the-ca",level:2},{value:"Alternative Solutions",id:"alternative-solutions",level:3}];function u(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"if-the-ui-shows-a-service-not-started-message",children:'If the UI shows a "Service Not Started" message.'}),"\n",(0,s.jsxs)(t.p,{children:["If you see this type of error reported by the UI, see ",(0,s.jsx)(t.a,{href:"/docs/backgroundservice",children:"Background Service"})," for more troubleshooting information."]}),"\n",(0,s.jsx)(t.h2,{id:"issues-communicating-with-the-ca",children:"Issues communicating with the CA"}),"\n",(0,s.jsxs)(t.p,{children:["In normal use the app must be able to talk to the ACME API for your chosen Certificate Authority (e.g. Let's Encrypt). If you see an error reported such as ",(0,s.jsx)(t.code,{children:"The ACME service (directory) is unavailable."})," this would indicate your machine is not able to establish communication with the CA service."]}),"\n",(0,s.jsx)(t.p,{children:"Common reasons for connectivity issues include:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["A service outage at the CA, check our ",(0,s.jsx)(t.a,{href:"/docs/guides/certificate-authorities",children:"Certificate Authorities"})," list to see if your CA has a status info page."]}),"\n",(0,s.jsx)(t.li,{children:"Blocking outgoing https (TCP port 443, outgoing) in Windows Firewall or at the network level."}),"\n",(0,s.jsx)(t.li,{children:"TLS 1.2 not enabled or an incompatible set of TLS ciphers is enabled. We recommend using the IIS Crypto tool from Nartac in Best Practises mode to configure general TLS settings."}),"\n",(0,s.jsx)(t.li,{children:"Inability to communicate via common cloud based service providers such as Cloudflare (perhaps due to IPv6 routing issues or some kind of blocking)."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"To see if there is a connectivity issue, find out the ACME API endpoint for your chosen CA and check you can communicate with it, e.g. for Let's Encrypt, using PowerShell:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-PS",children:"Invoke-WebRequest -Uri https://acme-v02.api.letsencrypt.org/directory \n"})}),"\n",(0,s.jsx)(t.p,{children:"This should return a StatusCode 200 (OK) under normal conditions, if the request fails you need to determine why your system is unable to communicate, this may require assistance from your networking team."}),"\n",(0,s.jsx)(t.p,{children:"If the above test works OK then next thing would be to determine if the CA is returning some kind of error that the app is unable to interpret."}),"\n",(0,s.jsxs)(t.p,{children:["You can use tools such as Telerik Fiddler to see the https conversation between your machine and the CAs API but you can also try enabling Debug logging in the app. To do so, edit ",(0,s.jsx)(t.code,{children:"C:\\ProgramData\\certify\\serviceconfig.json"})," and set the ",(0,s.jsx)(t.code,{children:'"LogLevel"'})," field to ",(0,s.jsx)(t.code,{children:'"debug"'})," instead of ",(0,s.jsx)(t.code,{children:'"information"'}),', then restart the Certify background service and attempt your request again (just click "Request Certificate" on a managed certificate). The ',(0,s.jsx)(t.code,{children:"C:\\ProgramData\\certify\\logs\\session*.log"})," file will then include the actual http conversation between you and the CA and you can use this to see if the CA is returning an error that the app is unable to interpret, or if the connection is simply not operating normally."]}),"\n",(0,s.jsx)(t.h3,{id:"alternative-solutions",children:"Alternative Solutions"}),"\n",(0,s.jsxs)(t.p,{children:["Occasionally you may be unable or unwilling to resolve the connectivity issue with the CA system. In this case we would suggest the next thing to try is to ",(0,s.jsx)(t.a,{href:"/docs/guides/certificate-authorities",children:"use a different CA"}),". You can try this for a single managed certificate and if that works change your default CA over to the new preferred CA."]})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var o=i(6540);const s={},n=o.createContext(s);function r(e){const t=o.useContext(n);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(n.Provider,{value:t},e.children)}}}]);